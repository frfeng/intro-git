<!DOCTYPE html>
<html>
  <head>
    <title>Intro to Git & GitHub</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap);
      @import url(https://fonts.googleapis.com/css2?family=Open+Sans:wght@700&display=swap);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body {font-family: 'Roboto'; font-weight: bold; line-height: 1.4;}
      .remark-code, .remark-inline-code {font-family: 'Ubuntu Mono'; font-size:26px;}
      .remark-slide-content h1 {font-size: 40px; text-align: center;}
      .remark-slide-content p, .remark-slide-content li {font-size:30px; margin: 20px 0;}
      a:link {text-decoration: none;}
      img{max-height: 100%;}
      .quote_author {display: block; text-align: right;}
      .tiny {font-size: 20px;}
      .red {color:red;}
      .green {color:green;}
      .blue {color:blue;}
      .gray {color:gray}
      .lightgray {color:lightgray}
    </style>
  </head>
  <body>

<textarea id="source">

## Notes
* Need to update screenshots with directory structure from the end of bash section see 

.center[![:scale 30%](./images/starting-directory-structure.png)]

* Include .gitignore discussion to show how to hide setup script (did this when teaching on 2023-10-12)
  * Ignore big data files, PHI, passwords, etc
  
* One person had git in a non-standard location that RStudio couldn't find

---

## Notes (cont)

* Windows had a pop up window when doing the first git push, had them pick token instead of the other options
* Windows terminal within RStudio doesn't seem to use bash 
* When instructor zooms in on RStudio, you lose the labels next to icons (e.g., Commit, Push, Pull)
* At end, would be good to see how an active research lab uses GitHub to serve up code/data/images for papers

---

## Notes (cont)

* Got through "Modify your R script..." exercise
  * then talked through why you'd run git from the command line
  * emphasized that 98% of my git use is covered by RStudio
  * encouraged to get comfortable using git in RStudio before trying to use git on command line

---

## Notes (cont)

* At the LICENSE part, I showed issue tracker
* Simulated a conversation with PI
* Picked the LICENSE
* Committed changes and closed issue

---

class: center, middle


# Introduction to 

.center[![:scale 30%](./images/Git-Logo-2Color.png)]

.center[![:scale 30%](./images/GitHub_Logo.png)]

---

class: middle, center

![:scale 56%](./images/phd101212s.gif)


.tiny[.lightgray[“Piled Higher and Deeper” by Jorge Cham]]

---
class: middle, center

.center[![:scale 100%](./images/word-diff.png) ]

---
class: middle, center

.center[![:scale 80%](./images/dropbox.png) ]

.center[![:scale 80%](./images/google-docs.png)]

---
class: middle, center

.center[![:scale 100%](./images/googlesheets-diff.png) ]

---
class: middle, center

.center[![:scale 100%](./images/excel-undo.png) ]

---
class: middle, center

![:scale 100%](./images/git-branch.svg)

---

class: middle, center

.center[![:scale 70%](./images/Git-Logo-2Color.png) ]

.center[![:scale 70%](./images/GitHub_Logo.png)]

--

---
class: middle, center


# One-time configurations

---

class: middle, center

.center[![:scale 100%](./images/rstudio-new-terminal.png) ]

---

class: middle, center

.center[![:scale 100%](./images/rstudio-terminal.png) ]

---

### User name

Set a name that is identifiable for credit when review version history.

```
$ git config --global user.name "Pat Schloss"
```

--

### User email

Set an email address that will be associated with each history marker.

```
$ git config --global user.email "pdschloss@umich.edu"
```


---
# Line endings

### On macOS and Linux:

```
$ git config --global core.autocrlf input
```

<br>

### On Windows:

```

$ git config --global core.autocrlf true
```


---

### Text editor

```
$ git config --global core.editor "nano -w"
```

--


### Default Branch name

```
$ git config --global init.defaultBranch main
```

--

### Credential storage

```
$ git config --global credential.helper store
```

---

### View the configurations

```
$ git config --list
```

---

## Now to initialize our repository

.center[![:scale 100%](./images/rstudio-git-init-1.png)]

---

## Now to initialize our repository

.center[![:scale 75%](./images/rstudio-git-init-2.png)]


---

## Using git - 98% of what you will do

* Get versions of our files into repository
* Attach a message to our files indicating what happened

.center[![:scale 90%](./images/git-committing.svg)]

---

## Untracked files

.center[![:scale 90%](./images/rstudio-git-unstaged.png)]

---

## Staging/adding our changes

.center[![:scale 65%](./images/rstudio-git-staged.png)]

Once files checked, click check icon under "Environment" tab name

---

## Committing our changes

.center[![:scale 65%](./images/rstudio-git-commit.png)]

Write "Initial commit" in message window

---

## Committing our changes

.center[![:scale 65%](./images/rstudio-git-commit-success.png)]

* Click close
* Notice that the staging window is now empty

---

## Create repository in GitHub

- Open the GitHub website and sign in
- Create a new repository with name .red[un-report]
  - Do not check the box to add a .red[README] file
  - Do not select a .red[.gitignore] file 
  - Do not select a .red[LICENSE] file
- Click .green[Create repository] button

---

## Connecting GitHub to your computer

.center[![:scale 65%](./images/github-push-instructions.png)]

Make sure that HTTPS is selected and click copy button to the right of the "…or push an existing repository from the command line" section

---

## Connecting GitHub to your computer

.center[![:scale 75%](./images/rstudio-git-push-setup.png)]

Enter your GitHub username and wait when asked for your password, we will use a personal access token
---

## Create Personal Access Token

.center[![:scale 100%](./images/github-dropdown-settings.png) ]

---

## Create Personal Access Token

.center[![:scale 100%](./images/github-dropdown-developer-settings.png) ]

---

## Create Personal Access Token

.center[![:scale 100%](./images/github-dropdown-pat-settings.png) ]

---

## Create Personal Access Token

.center[![:scale 100%](./images/github-generate-pat.png) ]

---

## Create Personal Access Token

.center[![:scale 100%](./images/github-new-access-token-1.png) ]

---

## Create Personal Access Token

.center[![:scale 100%](./images/github-new-access-token-2.png) ]

---

## Connecting GitHub to your computer

.center[![:scale 55%](./images/rstudio-git-push-setup-w-pat.png)]

* Where asked for your password paste the personal access token
* We shouldn't be asked for password again for 90 (or whatever) days


---

## New file

GitHub suggests adding a README file, let's do it from within RStudio

.center[![:scale 55%](./images/rstudio-new-markdown.png) ]


Save the file as .blue[README.md]

---
## Let's type some text into the .blue[README.md] file

```
## Notes for UN Report 

We plotted life expectancy over time.
```
  
--

Check out the change in the git staging window

.center[![:scale 50%](./images/rstudio-readme-unstaged.png) ]

---

## Stage, add and commit the change

.center[![:scale 100%](./images/rstudio-readme-commit-1.png) ]

---
## Let's add a line to README.md

```
We plotted life expectancy over time.
Each point represents a country
```

--
Notice the change in the git staging window

.center[![:scale 100%](./images/rstudio-readme-stage-modify.png) ]

---

## Commit the new changes

.center[![:scale 60%](./images/rstudio-readme-commit-2.png) ]

Notice the "diff" at the bottom of the window indicating what has changed

---

## Exercise

Follow the previous examples to...

- Add a third line to the README.md

```
We plotted life expectancy over time.
Each point represents a country.
Continents are grouped by color.
```

- Stage and commit the above change

- What happens if you click "View file @ XYZ1234" in the "Changes" view of an
earlier commit? When would you want to use this?

---

## Exercise

Which of the following commit messages would be most appropriate for the last commit?

1. “Changes”
1. “Added line ‘Continents are grouped by color.’ to notes.txt”
1. “Describe grouping”

---
class: middle, center


.center[![:scale 100%](./images/git_commit_2x.png)]

<br>

.lightgray[Source: https://xkcd.com/1296/]


---

## Show the commit logs

.center[![:scale 75%](./images/rstudio-git-history.png)]

---

## Let's edit our README.md file further

.center[![:scale 80%](./images/rstudio-readme-edit.png)]

---

## Let's check out the diff before committing

.center[![:scale 80%](./images/rstudio-readme-diff.png)]

---

## Let's stage and commit from the diff window

.center[![:scale 80%](./images/rstudio-readme-paragraph-commit.png)]

---

## How to get this up to GitHub?

.green[Push]. Click the upward pointing arrow.

.center[![:scale 80%](./images/rstudio-readme-push.png)]

---

## GitHub changes

.center[![:scale 100%](./images/github-readme-push.png)]

---

## GitHub commit history

.center[![:scale 100%](./images/github-commit-history.png)]


---

## GitHub diffs

.center[![:scale 100%](./images/github-commit-diff.png)]

---

## Let's create a file on GitHub

.center[![:scale 100%](./images/github-create-new-file.png)]

---

## Let's create a file on GitHub

.center[![:scale 100%](./images/github-name-file-license.png)]


---

## Let's create a file on GitHub

.center[![:scale 100%](./images/github-ignore-warning.png)]


---

## Let's create a file on GitHub

.center[![:scale 100%](./images/github-select-license.png)]

---

## Let's create a file on GitHub

.center[![:scale 100%](./images/github-license-text.png)]

---

## Let's commit changes on GitHub

.center[![:scale 100%](./images/github-license-commit.png)]

---

## New file already on GitHub

.center[![:scale 100%](./images/github-repo-update.png)]

---

## How do we get our file back to our local computer?

.center[![:scale 100%](./images/rstudio-pre-pull.png)]


---

## How do we get our file back to our local computer? .red[Pull]

.center[![:scale 100%](./images/rstudio-post-pull.png)]


---

## Exercise

* Modify your R script to include the following after the ggplot code chunk:

```
ggsave("figures/gdpPercap_lifeExp.png")
```

* Rerun the ggplot code chunk along with the following ggsave line
* Update your REAMDE.md file
* Stage the changes and new file, commit those changes, and push to GitHub

---

## Exercise

* Create a new Git repository on your computer called workshop
* Write three lines about what you have learned about R and bash a file called README.md, commit your changes
* Modify one line, add a fourth line
* Display the differences between its updated state and its original state
* Push it to GitHub

---

## Why run git from the terminal?

* RStudio and other git-based tools with a graphical user interface (GUI) have
gotten really good over the past few years, especially for most of our needs

--

* But they aren't as powerful as running the commands from the command line
--

* Believe it or not, typing can be a lot faster than pointing and clicking!

--

* If you need help doing something, Google likely point you to 
solutions using the command line
--

* You don't always have access to a GUI (e.g., HPC)

---

## git from the terminal

How do we look at the staging area?

```
$ git status
```

--

Modify README.md to include your name and the date

```
$ git status
```

--

See the change as git sees it

```
$ git diff
```

---

## git from the terminal

To stage the change (can add more than one file)

```
$ git add README.md 
$ git status
```

--

To commit the change

```
$ git commit -m "Added my name and date"
$ git status
```

---

## git from the terminal

To push the changes

```
$ git push
$ git status
```

--
To pull any changes (there aren't any)
```
$ git pull
```

Why might you want to pull from GitHub before committing any changes on your
local computer?

---

## Exercise

* Change the ColorBrewer palette to `Dark2`
* Rerun the code and be sure to save the output with `ggsave`
* Use `git status` to look at the staging area
* Use `git diff` to look at what has changed
* Stage, commit, and push your changes

---

## Collaboration

.center[![:scale 100%](./images/github-collaborators.png)]

---

## Collaboration

.center[![:scale 100%](./images/github-collaborators-add.png)]

---

## Collaboration

.center[![:scale 100%](./images/github-collaborators-waiting.png)]

---

## From here...

* Option 1: Fork repository / Create project from repository / Push / File pull request
* Option 2: Clone repository to new project / Push to main user's repository
* Option 3: Create feature branch / Clone repository to new project / Work on new feature branch / Push to main user's repository / Merge branches

Cover how to handle merge conflicts?

<!-- ------------------------------------------ -->

</textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_HTML&delayStartupUntil=configured" type="text/javascript"></script>

<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>mermaid.initialize({startOnLoad:true});</script>

<script>
remark.macros.scale = function (percentage) {
  var url = this;
  return '<img src="' + url + '" style="width: ' + percentage + '" />';
};

var slideshow = remark.create({
  countIncrementalSlides: false,
  highlightLanguage: 'python',
  highlightStyle: 'tomorrow-night-bright', 
  highlightSpans: true,
  highlightLines: false,
});

      // Setup MathJax
      MathJax.Hub.Config({
          tex2jax: {
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
          inlineMath: [['$','$'], ['\\(','\\)']]
          }
      });

      MathJax.Hub.Configured();
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/9.1.7/mermaid.min.js"></script>
<link rel="stylesheet" href="./mermaid.css">
<script>mermaid.initialize({startOnLoad:true});</script>

</body>
</html>
